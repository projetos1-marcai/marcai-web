<app-spinner *ngIf="isLoading"></app-spinner>
<div class="create-container layout-wrapper">
  <h1>Cadastrar um serviço</h1>
  <h2 class="title-container">Dados do serviço</h2>

  <img
    *ngIf="createForm.get('logo')?.value.file !== null"
    [src]="createForm.get('logo')?.value.base64"
    class="image-preview"
    style="height: 150px; width: auto; max-width: 400px"
  />
  <p
    *ngIf="createForm.get('logo')?.value.file !== null"
    style="color: var(--benup-colors-danger); cursor: pointer"
    (click)="createForm.get('logo')?.setValue({ uploaded: false, file: null, base64: null })"
  >
    Remover imagem
  </p>
  <form [formGroup]="createForm">
    <div class="create-container-form">
      <app-file-uploader
        [file]="createForm.get('logo')"
        accept="image/png, image/jpeg"
        title="Selecionar imagem"
        (onSelect)="onFileSelected($event)"
      ></app-file-uploader>
      <mat-form-field appearance="outline">
        <mat-label>Título</mat-label>
        <input type="text" matInput formControlName="titulo" placeholder="Título" required />
      </mat-form-field>
      <mat-form-field appearance="outline" color="primary">
        <mat-label>Categoria</mat-label>
        <mat-select required formControlName="categoria">
          <mat-option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Descrição</mat-label>
        <input type="textarea" matInput formControlName="descricao" placeholder="Descrição" />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Métodos de pagamento</mat-label>
        <mat-select formControlName="formas_pagamento" multiple>
          <mat-option *ngFor="let payment of paymentMethods" [value]="payment.id">
            {{ payment.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" color="primary">
        <mat-label>Valor do serviço</mat-label>
        <input
          type="text"
          currencyMask
          [options]="{
            prefix: 'R$ ',
            thousands: '.',
            decimal: ','
          }"
          matInput
          formControlName="valor"
        />
      </mat-form-field>
      <mat-slide-toggle color="primary" formControlName="presencial">
        Serviço presencial
      </mat-slide-toggle>
    </div>

    <div class="create-container-agenda">
      <h2 class="title-container">Dias e horários de atendimento</h2>
      <p>Marque os dias e horários de trabalho</p>
      <form [formGroup]="agendaForm">
        <div class="create-container-agenda-content bnp-mt-30">
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="monday">
                Segunda
              </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="mondayStart"
                [ngClass]="{ disabled: !agendaForm.get('monday')!.value }"
              />
              <input
                type="time"
                formControlName="mondayEnd"
                [ngClass]="{ disabled: !agendaForm.get('monday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('monday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="mondayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('monday')!.value }"
              />
              <input
                type="time"
                formControlName="mondayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('monday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="tuesday"> Terça </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="tuesdayStart"
                [ngClass]="{ disabled: !agendaForm.get('tuesday')!.value }"
              />
              <input
                type="time"
                formControlName="tuesdayEnd"
                [ngClass]="{ disabled: !agendaForm.get('tuesday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('tuesday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="tuesdayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('tuesday')!.value }"
              />
              <input
                type="time"
                formControlName="tuesdayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('tuesday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="wednesday">
                Quarta
              </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="wednesdayStart"
                [ngClass]="{ disabled: !agendaForm.get('wednesday')!.value }"
              />
              <input
                type="time"
                formControlName="wednesdayEnd"
                [ngClass]="{ disabled: !agendaForm.get('wednesday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('wednesday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="wednesdayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('wednesday')!.value }"
              />
              <input
                type="time"
                formControlName="wednesdayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('wednesday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="thursday">
                Quinta
              </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="thursdayStart"
                [ngClass]="{ disabled: !agendaForm.get('thursday')!.value }"
              />
              <input
                type="time"
                formControlName="thursdayEnd"
                [ngClass]="{ disabled: !agendaForm.get('thursday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('thursday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="thursdayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('thursday')!.value }"
              />
              <input
                type="time"
                formControlName="thursdayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('thursday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="friday"> Sexta </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="fridayStart"
                [ngClass]="{ disabled: !agendaForm.get('friday')!.value }"
              />
              <input
                type="time"
                formControlName="fridayEnd"
                [ngClass]="{ disabled: !agendaForm.get('friday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('friday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="fridayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('friday')!.value }"
              />
              <input
                type="time"
                formControlName="fridayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('friday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="saturday">
                Sábado
              </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="saturdayStart"
                [ngClass]="{ disabled: !agendaForm.get('saturday')!.value }"
              />
              <input
                type="time"
                formControlName="saturdayEnd"
                [ngClass]="{ disabled: !agendaForm.get('saturday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('saturday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="saturdayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('saturday')!.value }"
              />
              <input
                type="time"
                formControlName="saturdayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('saturday')!.value }"
              />
            </div>
          </div>
          <div class="create-container-agenda-content-item">
            <div class="create-container-agenda-content-item-day">
              <mat-slide-toggle color="primary" formControlName="sunday">
                Domingo
              </mat-slide-toggle>
            </div>
            <div class="create-container-agenda-content-item-hours">
              <input
                type="time"
                formControlName="sundayStart"
                [ngClass]="{ disabled: !agendaForm.get('sunday')!.value }"
              />
              <input
                type="time"
                formControlName="sundayEnd"
                [ngClass]="{ disabled: !agendaForm.get('sunday')!.value }"
              />

              <p class="bnp-pl-30" [ngClass]="{ disabled: !agendaForm.get('sunday')!.value }">
                Horário de intervalo
              </p>

              <input
                type="time"
                formControlName="sundayStopStart"
                [ngClass]="{ disabled: !agendaForm.get('sunday')!.value }"
              />
              <input
                type="time"
                formControlName="sundayStopEnd"
                [ngClass]="{ disabled: !agendaForm.get('sunday')!.value }"
              />
            </div>
          </div>
        </div>
      </form>
    </div>
  </form>

  <footer>
    <button
      type="button"
      [disabled]="disableButton()"
      (click)="onSubmit()"
      class="custom-flat-button"
      mat-flat-button
    >
      Cadastrar serviço
    </button>
  </footer>
</div>
